
<div class="wrapper">

    <div class="static-div">
        <form>
            <label for="select">Select a post to edit:</label>
            <select #blogs (change)="onFormSelect(blogs.value)" name="select" id="select">
                @for(post of posts; track post) {
                    <option value="{{$index}}">{{post.slug}}</option>
                }
            </select>
            <a href="{{baseURL}}{{selectedPost.slug}}" target="_blank">preview</a> 
        </form>

        <button type="submit" class="formButton" (click)="onSave()">Save</button>
        <button type="button" class="formButton" (click)="onYesDelete(false)">Delete</button>
        <span [ngClass]="askForConfirmation? 'showButton' : ''" class="sureButton"> 
            Are you sure? 
            <button type="button" class="formButton" (click)="onYesDelete(true)">Yes</button>
            <button type="button" class="formButton" (click)="onNoDelete()">No</button></span>

    </div>

    <div class="scrolling-div">

        <form #blogForm="ngForm">

            <div>
                <label for="slug">Slug:</label>
                <span name="slug" id="slug">{{makeSlug()}}</span>
            </div>

            <div>
                <label for="publish">Publish:</label>
                <select #publish [(ngModel)]="selectedPost.isPublished" name="publish" id="publish">
                    <option value="true">true</option>
                    <option value="false">false</option>
                </select>
            </div>

            <div>
                <label for="type">Type:</label>
                <select #type [(ngModel)]="selectedPost.type" name="type" id="type">
                    <option value="faq">faq</option>
                    <option value="article">article</option>
                </select>
            </div>

            <div>
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" [(ngModel)]="selectedPost.title">
            </div>
            
            <div>
                <label for="subtitle">Subtitle:</label>
                <input type="text" id="subtitle" name="subtitle" [(ngModel)]="selectedPost.subtitle">
            </div>

            <div>
                <label for="keywords">Keywords:</label>
                <input type="text" id="keywords" name="keywords" (ngModelChange)="keywords($event)" [ngModel]="selectedPost.keywords">
            </div>

            <div>
                <label for="fname">Image filename:</label>
                <input type="text" id="fname" name="fname" [(ngModel)]="selectedPost.imgFname">                   
            </div>

            <div>
                <label for="alt">Image Alt Text:</label>
                <input type="text" id="alt" name="alt" [(ngModel)]="selectedPost.imgAlt">
            </div>

            <div>
                <label for="intro">Intro:</label>
                <textarea type="text" id="intro" name="intro" [(ngModel)]="selectedPost.intro"></textarea>
            </div>

            <div>
                <label for="callToAction">Conclusion:</label>
                <textarea type="text" id="callToAction" name="callToAction" [(ngModel)]="selectedPost.conclusion"></textarea>
            </div>

            @for(section of selectedPost.sections; track section) {
                <hr>
                <div>
                    <label>Section {{$index+1}}</label>
                    <button class="qaButton" type="button" (click)="deleteQA($index)">Delete this section</button>
                </div>

                <div>
                    <label for="question{{$index}}">Title:</label>
                    <input type="text" id="question{{$index}}" name="question{{$index}}" [(ngModel)]="selectedPost.sections[$index].title">
                </div>

                <div>
                    <label for="answer{{$index}}">Content:</label>
                    <textarea type="text" id="answer{{$index}}" name="answer{{$index}}" [(ngModel)]="selectedPost.sections[$index].content"></textarea>
                </div>

                <div>
                    <label for="fname{{$index}}">Image filename:</label>
                    <input type="text" id="fname{{$index}}" name="fname{{$index}}" [(ngModel)]="selectedPost.sections[$index].imgFname">                   
                </div>
    
                <div>
                    <label for="alt{{$index}}">Image Alt Text:</label>
                    <input type="text" id="alt{{$index}}" name="alt{{$index}}" [(ngModel)]="selectedPost.sections[$index].imgAlt">
                </div>              

                @if ($last) {
                    <button type="button" class="qaButton" (click)="addQA()">New section</button>
                }
            }

        </form>
    </div>
</div>
